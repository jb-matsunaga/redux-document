# Reducers
アクションは何かが起こったという事実を記述しますが、アプリケーションの状態がどのように変化するかを指定しません。 これはReducersの仕事です。

## 状態形状の設計
Reduxでは、すべてのアプリケーション状態が単一のオブジェクトとして格納されます。 コードを書く前にその形状を考えることは良い考えです。 オブジェクトとしてのあなたのアプリの状態の最小限の表現は何ですか？

Todoアプリでは、2つの異なるものを保存したい：

- 現在選択されている可視性フィルタ。
- todosの実際のリスト。

いくつかのデータとUI状態を状態ツリーに格納する必要があることがよくあります。 これは問題ありませんが、データをUI状態と区別して保存してください。

```javascript
{
    visibilityFilter: 'SHOW_ALL',
    todos: [
        {
            text: 'Consider using Redux',
            completed: true,
        },
        {
            text: 'Keep all state in a single tree',
            completed: false
        }
    ]
}
```

関係に関する注意

より複雑なアプリケーションでは、異なるエンティティが互いに参照するようにします。 ネストしないで、できるだけ正規化した状態を保つことをお勧めします。 IDが格納されているオブジェクト内のすべてのエンティティをキーとして保持し、IDを使用して他のエンティティまたはリストからそのIDを参照します。 アプリケーションの状態をデータベースと考えてください。 このアプローチは、法律家の文書に詳細に記載されています。 たとえば、状態の中にtodosById：{id - > todo}とtodos：array <id>を保持する方が、実際のアプリケーションではより良いアイデアになりますが、例を単純にしています。

## アクションの処理
状態オブジェクトがどのように見えるかを決定したので、そのためのReducerを書く準備ができました。 レデューサーは、前の状態とアクションを取り、次の状態を返す純粋な関数です。

```javascript
(previousState, action) => newState
```
これは、あなたがArray.prototype.reduce（reducer、？initialValue）に渡す関数のタイプであるため、Reducerと呼ばれています。 Reducerが純粋にとどまることは非常に重要です。